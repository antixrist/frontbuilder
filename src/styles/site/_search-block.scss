$panel-box-bounds: get-bounds-map($panel-box) !default;

.search-form {
  @include box($panel-box);

  position: relative;

  .search-btn {
    @include unboxing($panel-box, top right bottom);
    @include box($panel-box);
  }

  .search-list-toggler {
    position: absolute;
    left: 100%;
    top: 0;
    bottom: 0;

    .btn {
      height: auto;
      position: relative;
      overflow: hidden;
      border: none;
    }

    .toggler-icon {
      width: 21px;
      margin-top: 4px;
      margin-left: 3px;
    }

    .toggler-counter {
      color: #fff;
      background: #287ba4;
      position: absolute;
      top: 0;
      right: 0;
      line-height: 1;
      font-size: 9px;
      border-bottom-left-radius: 8px;
      padding: 3px 3px 2px 4px;
    }
  }

}

.search-results {
  @include box($panel-box, x bottom);

  &,
  .pagination { border-top: 1px solid $borders-color; }
  .pagination {
    @include box($panel-box);
    @include unboxing($panel-box, x bottom);
  }

  .search-results-title {
    margin: 0;
    @include box($panel-box);
    @include unboxing($panel-box, x);
  }
  .closer {
    @include unboxing($panel-box);
    @include box($panel-box);
    @include opacity-states();
  }

  &-table {
    $table-cells-box: 5px 15px;

    //&:last-child { @include box($panel-box, bottom); }

    > table {
      min-width: 100%;

      td, th { font-size: 12px; }

      @include table-cells-padding($table-cells-box, x between half-between);
      @include table-cells-padding($table-cells-box, y);
      > tbody { @include table-cells-border(1px dashed $borders-color, between top, $blocks: false); }

      @include table-ears () {
        background: $borders-color;
        width: map-get($panel-box-bounds, x);
        z-index: -1;
      }

      thead {
        color: $base-color-muted;
        background: $borders-color;

        th { vertical-align: middle; }
        a {
          @include link(
            $color-normal: $base-color-muted,
            $color-hover: $base-color,

            $border-color-normal: transparent,
            $border-color-hover: transparent,
            $border-color-focus: transparent,
            $border-color-active: transparent,
            $border-color-visited: transparent,

            $transition-normal: (color .2s ease-out),
            $transition-active: (color .1s ease-out)
          );
        }
      }

      .cell-unboxing {
        @include unboxing(5px 7px);
        @include box(5px 7px);
        display: block;
      }

      .station {
        &-sources-list {
          white-space: nowrap;

          .station-source {
            padding-left: 12px;
            &:first-child { padding-left: 0; }
          }

          &:hover .station-source {
            @include opacity-states($normal: .5, $active: 1);
          }
        }
      }

      .station-details {
        &-table {
          @include table-cells-padding($table-cells-box, x around between half-between);
          @include table-cells-padding($table-cells-box, y);

          @include table-cells-border(1px solid $borders-color, around left right bottom);
          > tbody { @include table-cells-border(1px dashed $borders-color, y between, $blocks: false); }
        }

        .icon-checkbox {
          @extend %link;
          @include opacity-states();
        }
      }

      .station-details { display: none; }
      .station.is-expanded {
        & + .station-details {
          display: table-row;
          > td, > th { border-top: none !important; }

          & + .station {
            > td, > th { border-top: none !important; }
          }
        }
      }
    }
  }
}
